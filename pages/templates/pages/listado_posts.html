{% extends 'index/index.html' %}

{% load static %}

{% block headerIndex %}

<div class="container px-5">
    <div class="row gx-5 justify-content-center">
        <div class="col-lg-6">
            <div class="text-center my-10">
                <h1 class="display-5 fw-bolder text-white mb-2">Publicaciones</h1>
                <div class="d-grid gap-3 d-sm-flex justify-content-sm-center">
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock headerIndex %}



{% block bodyIndex %}

<div class='container'>
    <br>
    <br>
    {% if request.user.is_authenticated %}
    <a class="btn btn-primary btn-lg px-4 me-sm-3" href={% url 'crear_post' %}>Crear post</a>
    {% endif %}
    <a class="btn btn-primary btn-lg px-4 me-sm-3" href={% url 'buscar_post' %}>Buscar post</a>
    <br>
    <br>
    {% if posts %}
        {% for post in posts %}
        <div>
            <br>
            <h2>{{ post.titulo }}</h2>
            <p>{{ post.autor.first_name }} {{ post.autor.last_name }}</p>

            <p><img src="{{post.imagen.url}}" height='300'></p>

            {% comment %} <p>{{ post.contenido | safe }}</p> {% endcomment %}
            <p>{{ post.fecha | date:'d-m-Y H:m' }}</p>
            <br>
        </div>
        <div>
            <a class="btn btn-primary btn-lg px-4 me-sm-3" href={% url 'leer_post' post.id %}>Leer mas</a>
            {% if request.user.is_authenticated %}
            <a class="btn btn-primary btn-lg px-4 me-sm-3" href={% url 'editar_post' post.id %}>Editar</a>
            <a class="btn btn-primary btn-lg px-4 me-sm-3" href={% url 'borrar_post' post.id %}>Borrar</a>
            {% endif %}
        </div>
        {% endfor %}
    {% else %}

    <h1>No hay ningun post publicado, ponete la 10 maestro!</h1>

    {% endif %}
    <br>
    <br>

</div>

{% endblock bodyIndex %}
